<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script> <!-- this is just to import the barcode scanner-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div id="interactive" class="viewport"></div>
    <title>Vision Screening</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="component" id="barcodeScannerComponent">
        <button id="startScanButton" class="submit-button">Scan Barcode</button>
        <div id="scannerContainer" style="display: none;">
            <video id="scannerPreview"></video>
        </div>
        <p id="barcodeResult"></p>
    </div>
    
    <div class="container">
        <div class="left-panel">
            <ul id="nameList">
              <!-- List will be dynamically populated by JavaScript -->
            </ul>
        </div>
        <div class="right-panel">
            <div class="component" id="component1">
                <div class="header-box" id="visitDateHeader">Visit Date: <!-- Date will be set by JavaScript --></div>
                <div class="row">
                    <span>Vision Screening</span>
                </div>
                <div class="box">
                    <div class="patient-details">
                        <div class="detail-row">
                            <div><strong>Name:</strong> <span id="patientName"></span></div>
                            <div><strong>NRIC:</strong> <span id="patientNRIC"></span></div>
                            <div><strong>Gender:</strong> <span id="patientGender"></span></div>
                            <div><strong>Birthdate:</strong> <span id="patientBirthdate"></span></div>
                        </div>
                        <div class="detail-row">
                            <div><strong>School:</strong> <span id="patientSchool"></span></div>
                            <div><strong>Level:</strong> <span id="patientLevel"></span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="component" id="component2">
                <div class="header-box">Last Vision Screening</div>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th colspan="6">Snellen</th>
                            <th colspan="6">LogMAR</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th colspan="2">w/o glasses</th>
                            <th colspan="2">w glasses</th>
                            <th colspan="2">w lenses</th>
                            <th colspan="2">w/o glasses</th>
                            <th colspan="2">w glasses</th>
                            <th colspan="2">w lenses</th>
                        </tr>
                        <tr>
                            <th>Age</th>
                            <th>Level</th>
                            <th>Date</th>
                            <th>Loc</th>
                            <th>Right</th>
                            <th>Left</th>
                            <th>Right</th>
                            <th>Left</th>
                            <th>Right</th>
                            <th>Left</th>
                            <th>Right</th>
                            <th>Left</th>
                            <th>Right</th>
                            <th>Left</th>
                            <th>Right</th>
                            <th>Left</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Add table rows here -->
                        <tr>
                            <td>8</td>
                            <td>P2</td>
                            <td>01-01-2022</td>
                            <td>School</td>
                            <td>20/20</td>
                            <td>20/20</td>
                            <td>20/20</td>
                            <td>20/20</td>
                            <td>20/20</td>
                            <td>20/20</td>
                            <td>0.02</td>
                            <td>0.02</td>
                            <td>0.02</td>
                            <td>0.02</td>
                            <td>0.02</td>
                            <td>0.02</td>
                        </tr>
                        <!-- More rows as needed -->
                    </tbody>
                </table>
            </div>

            <div class="component" id="component3">

                <form id="withoutPinholeScreeningForm" action="/submit1" method="POST">
                
                <div class="header-box">Vision Screening Without Pinhole</div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th colspan="2" , rowspan="3">Visual Acuity</th>
                                <th colspan="4">Right</th>
                                <th colspan="4">Left</th>
                            </tr>
                            <tr>
                                <th colspan="3">LogMAR</th>
                                <th colspan="1" , rowspan="2">Snellen (computed values)</th>
                                <th colspan="3">LogMAR</th>
                                <th colspan="1" , rowspan="2">Snellen (computed values)</th>
                            </tr>
                            <tr>
                                <th>Base</th>
                                <th>#Char can't see</th>
                                <th>Value</th>
                                <th>Base</th>
                                <th>#Char can't see</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="2">w/o glasses</td>
                                <td><input type="number" id="without_right_1_base"></td>
                                <td><input type="text" id="without_right_1_char"></td>
                                <td><input type="number" id="without_right_1_value"></td>
                                <td></td>
                                <td><input type="number" name="without_left_1_base"></td>
                                <td><input type="text" name="without_left_1_char"></td>
                                <td><input type="number" name="without_left_1_value"></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="2">w glasses</td>
                                <td><input type="number" name="without_right_2_base"></td>
                                <td><input type="text" name="without_right_2_char"></td>
                                <td><input type="number" name="without_right_2_value"></td>
                                <td></td>
                                <td><input type="number" name="without_left_2_base"></td>
                                <td><input type="text" name="without_left_2_char"></td>
                                <td><input type="number" name="without_left_2_value"></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="2">w lenses</td>
                                <td><input type="number" name="without_right_3_base"></td>
                                <td><input type="text" name="without_right_3_char"></td>
                                <td><input type="number" name="without_right_3_value"></td>
                                <td></td>
                                <td><input type="number" name="without_left_3_base"></td>
                                <td><input type="text" name="without_left_3_char"></td>
                                <td><input type="number" name="without_left_3_value"></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="remarks">
                    <div class="remark-row">
                        <label for="logMARRemarks">LogMAR Remarks:</label>
                        <input type="text" id="logMARRemarksWithoutPinhole" name="logMARRemarksWithoutPinhole" class="short-input">
                    </div>
                    <div>
                        <input type="checkbox" id="absent">
                        <label for="absent">Absent</label>
                    </div>
                    <div>
                        <input type="checkbox" id="financialAssistance">
                        <label for="financialAssistance">Student on Financial Assistance</label>
                    </div>
                    <div>
                        <button type="submit" class="submit-button">Submit</button>
                    </div>
                </div>

                </form>
                    
            </div>

            <div class="component" id="component4">

                <form id="withPinholeScreeningForm" action="/submit2" method="POST">
                
                <div class="header-box">Vision Screening With Pinhole</div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th colspan="2" , rowspan="3">Visual Acuity</th>
                                <th colspan="4">Right</th>
                                <th colspan="4">Left</th>
                            </tr>
                            <tr>
                                <th colspan="3">LogMAR</th>
                                <th colspan="1" , rowspan="2">Snellen (computed values)</th>
                                <th colspan="3">LogMAR</th>
                                <th colspan="1" , rowspan="2">Snellen (computed values)</th>
                            </tr>
                            <tr>
                                <th>Base</th>
                                <th>#Char can't see</th>
                                <th>Value</th>
                                <th>Base</th>
                                <th>#Char can't see</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="2">w/o glasses</td>
                                <td><input type="number" name="with_right_1_base"></td>
                                <td><input type="text" name="with_right_1_char"></td>
                                <td><input type="number" name="with_right_1_value"></td>
                                <td></td>
                                <td><input type="number" name="with_left_1_base"></td>
                                <td><input type="text" name="with_left_1_char"></td>
                                <td><input type="number" name="with_left_1_value"></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="2">w glasses</td>
                                <td><input type="number" name="with_right_2_base"></td>
                                <td><input type="text" name="with_right_2_char"></td>
                                <td><input type="number" name="with_right_2_value"></td>
                                <td></td>
                                <td><input type="number" name="with_left_2_base"></td>
                                <td><input type="text" name="with_left_2_char"></td>
                                <td><input type="number" name="with_left_2_value"></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="2">w lenses</td>
                                <td><input type="number" name="with_right_3_base"></td>
                                <td><input type="text" name="with_right_3_char"></td>
                                <td><input type="number" name="with_right_3_value"></td>
                                <td></td>
                                <td><input type="number" name="with_left_3_base"></td>
                                <td><input type="text" name="with_left_3_char"></td>
                                <td><input type="number" name="with_left_3_value"></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="remarks">
                    <div class="remark-row">
                        <label for="logMARRemarksWithPinhole">LogMAR Remarks:</label>
                        <input type="text" id="logMARRemarksWithPinhole" name="logMARRemarksWithPinhole" class="short-input">
                    </div>
                    <div>
                        <input type="checkbox" id="absentWithPinhole">
                        <label for="absentWithPinhole">Absent</label>
                    </div>
                    <div>
                        <input type="checkbox" id="financialAssistanceWithPinhole">
                        <label for="financialAssistanceWithPinhole">Student on Financial Assistance</label>
                    </div>
                    <div>
                        <button type="submit" class="submit-button">Submit</button>
                    </div>
                </div>

                </form>
                
            </div>
            
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>
